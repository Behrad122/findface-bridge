# FindFace Bridge API

> REST API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–æ–π —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü FindFace.

## –†–µ—à–∞–µ–º—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### üîß –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FindFace —Ç—Ä–µ–±—É–µ—Ç –≥–ª—É–±–æ–∫–æ–≥–æ –∑–Ω–∞–Ω–∏—è –µ–≥–æ API, —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π REST API —Å –ø—Ä–æ—Å—Ç–æ–π JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏.

### üîÑ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Ç–∞–π–º–∞—É—Ç—ã, 401/403 –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (–¥–æ 5 —Ä–∞–∑)
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ 401/403 –æ—à–∏–±–∫–∞—Ö

### üìä –ö–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ FindFace –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–µ –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ:**
- –ê–ª–≥–æ—Ä–∏—Ç–º `findByDetectionRange` —Å –ø–æ—Ä–æ–≥–æ–º —Å—Ö–æ–∂–µ—Å—Ç–∏ 0.72
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (24 —á–∞—Å–∞)
- –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É —Å—Ö–æ–∂–µ—Å—Ç–∏

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –¥–æ 50 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Blob-–¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ MinIO
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –∏ API FindFace.

**–†–µ—à–µ–Ω–∏–µ:**
- Debug-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ MinIO
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- Health-check –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞

### üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Ñ–∞–π–ª—ã vs Base64 vs Blob).

**–†–µ—à–µ–Ω–∏–µ:**
- –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Base64)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ Blob, —Ç–∞–∫ –∏ MinIO-—Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ó–∞–ø—É—Å–∫ —Å Docker Compose

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `docker-compose.yml`:**
```yaml
version: "3.3"

services:
  app:
    image: tripolskypetr/findface-bridge:latest
    ports:
      - "20050:20050"
    environment:
      - TZ=Europe/Moscow
    env_file:
      - .env
    volumes:
      - ./logs:/app/logs
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:20050/health_check"]
      interval: 30s
      timeout: 10s
      retries: 3
    restart: always
```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.env`:**
```env
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ FindFace
CC_FINDFACE_URL=http://127.0.0.1
CC_FINDFACE_USER=admin
CC_FINDFACE_PASSWORD=password

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–±—ã—Ç–∏–π
CC_FINDFACE_EVENT_TOKEN=15ca64cd61e14022b7c6eecc8cfc4b63
CC_FINDFACE_EVENT_CAMERA=2
CC_FINDFACE_WATCHLIST=2

# ID –∫–∞–º–µ—Ä—ã
CC_FINDFACE_CAMERA_ID=1

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
CC_ENABLE_TERMINATE_SESSIONS=0

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã MinIO (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
CC_MINIO_ENDPOINT=localhost
CC_MINIO_PORT=9002
CC_MINIO_ACCESSKEY=minioadmin
CC_MINIO_SECRETKEY=minioadmin
```

3. **–°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –ª–æ–≥–æ–≤:**
```bash
mkdir logs
```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
```bash
docker-compose up -d
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ –≥–æ—Ç–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞:

```bash
docker run -d \
  --name findface-bridge \
  --network host \
  --env-file .env \
  -e Europe/Moscow \
  --restart always \
  tripolskypetr/findface-bridge:latest
```

## –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–º–µ—é—Ç –æ–±—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏:

```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": { ... }
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```json
{
  "status": "ok",
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": { ... }
}
```

### –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π
```json
{
  "status": "error",
  "error": "string",
  "clientId": "string",
  "requestId": "string",
  "serviceName": "string",
  "userId": "string"
}
```

## API Endpoints

### 1. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏

**POST** `/api/v1/findface/detectFace`

–û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ª–∏—Ü–∞ –Ω–∞ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "imageBase64": "string",
    "imageName": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": [
    {
      "detectId": "string",
      "bbox": {
        "left": 0,
        "top": 0,
        "right": 100,
        "bottom": 100
      },
      "detectionScore": 0.95,
      "lowQuality": false
    }
  ]
}
```

### 2. –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤

**POST** `/api/v1/findface/detectLicensePlate`

–†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –Ω–æ–º–µ—Ä–Ω—ã–µ –∑–Ω–∞–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "imageBase64": "string",
    "imageName": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": [
    {
      "bbox_top": 10,
      "bbox_left": 20,
      "bbox_right": 150,
      "bbox_bottom": 60,
      "licensePlate": "–ê123–ë–í77",
      "country": "RU",
      "category": "passenger",
      "body": "sedan",
      "make": "Toyota",
      "model": "Camry",
      "color": "white",
      "orientation": "front"
    }
  ]
}
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞ —Å –∫–∞–º–µ—Ä—ã

**POST** `/api/v1/findface/captureScreenshot`

–°–æ–∑–¥–∞–µ—Ç —Å–Ω–∏–º–æ–∫ —Å —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–∞–º–µ—Ä—ã.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "cameraId": 1
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": {
    "imageBase64": "string",
    "contentType": "image/jpeg"
  }
}
```

### 4. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏—Ü–∞

**POST** `/api/v1/findface/verifyFace`

–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ —Å –∫–∞—Ä—Ç–æ–π –ª–∏—Ü–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "cardId": "string",
    "detectionId": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": {
    "faceObjects": { "face1": 0.95 },
    "averageConf": 0.95
  }
}
```

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –ª–∏—Ü–∞ –≤ –∫–∞—Ä—Ç–µ

**POST** `/api/v1/findface/createFace`

–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–µ –ª–∏—Ü–æ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ä—Ç–µ.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "cardId": "string",
    "imageBase64": "string",
    "imageName": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": {
    "faceId": "string",
    "fileName": "string",
    "thumbnail": "string",
    "src": "string"
  }
}
```

### 6. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ª–∏—Ü

**POST** `/api/v1/findface/listFace`

–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ª–∏—Ü –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "cardId": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": [
    {
      "faceId": "string",
      "fileName": "string",
      "thumbnail": "string",
      "src": "string"
    }
  ]
}
```

### 7. –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—Ü–∞

**POST** `/api/v1/findface/removeFace`

–£–¥–∞–ª—è–µ—Ç –ª–∏—Ü–æ –ø–æ –µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "faceId": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": null
}
```

### 8. –ü–æ–∏—Å–∫ –∫–∞—Ä—Ç—ã –ø–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—é

**POST** `/api/v1/findface/findByDetection`

–ù–∞—Ö–æ–¥–∏—Ç –∫–∞—Ä—Ç—É —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ª–∏—Ü–∞.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "detectionId": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": {
    "id": "string",
    "name": "string"
  }
}
```

### 8.1. –ü–æ–∏—Å–∫ –∫–∞—Ä—Ç—ã –ø–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—é —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

**POST** `/api/v1/findface/findByDetectionRange`

–ù–∞—Ö–æ–¥–∏—Ç –∫–∞—Ä—Ç—É —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ª–∏—Ü–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ 5 –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏—Ö –∫–∞—Ä—Ç –≤–º–µ—Å—Ç–æ 1
- –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø–æ—Ä–æ–≥—É —Å—Ö–æ–∂–µ—Å—Ç–∏ (0.72)
- –ò—Å–∫–ª—é—á–∞–µ—Ç –∫–∞—Ä—Ç—ã, –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –±–æ–ª–µ–µ 24 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥
- –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ —É–±—ã–≤–∞–Ω–∏—é –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —Å—Ö–æ–∂–µ—Å—Ç–∏
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∞–º—ã–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "detectionId": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": {
    "id": "string",
    "name": "string"
  }
}
```

### 9. –ü–æ–∏—Å–∫ –∫–∞—Ä—Ç—ã –ø–æ ID

**POST** `/api/v1/findface/findByCardId`

–ù–∞—Ö–æ–¥–∏—Ç –∫–∞—Ä—Ç—É —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ –µ—ë –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "cardId": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": {
    "id": "string",
    "name": "string"
  }
}
```

### 10. –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã —á–µ–ª–æ–≤–µ–∫–∞

**POST** `/api/v1/findface/createHumanCard`

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É —á–µ–ª–æ–≤–µ–∫–∞.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "name": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": {
    "id": "string",
    "name": "string"
  }
}
```

### 11. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã —á–µ–ª–æ–≤–µ–∫–∞

**POST** `/api/v1/findface/updateHumanCard`

–û–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–∞—Ä—Ç—É —á–µ–ª–æ–≤–µ–∫–∞.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "id": 1,
    "dto": {
      "name": "string"
    }
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": {
    "id": "string",
    "name": "string"
  }
}
```

### 12. –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –ª–∏—Ü–∞

**POST** `/api/v1/findface/eventFace`

–°–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "imageBase64": "string",
    "imageName": "string"
  }
}
```

### 13. –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –ª–∏—Ü–∞ –ø–æ ID –∫–∞—Ä—Ç—ã

**POST** `/api/v1/findface/eventFaceByCardId`

–°–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –ª–∏—Ü–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "cardId": "string"
  }
}
```

### 14. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–∏—è –∫ –∫–∞—Ä—Ç–µ

**POST** `/api/v1/findface/addHumanCardAttachment`

–î–æ–±–∞–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ –≤–ª–æ–∂–µ–Ω–∏–µ –∫ –∫–∞—Ä—Ç–µ —á–µ–ª–æ–≤–µ–∫–∞.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "serviceName": "string",
  "clientId": "string",
  "userId": "string",
  "requestId": "string",
  "data": {
    "id": 1,
    "imageBase64": "string",
    "imageName": "string"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "data": {
    "fileId": "string",
    "fileName": "string",
    "mimeType": "string"
  }
}
```

## Debug Minio-endpoints

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ endpoints, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ MinIO –ª–æ–≥:

- `/api/v1/findface/detectFaceMinio` - –∞–Ω–∞–ª–æ–≥ `/api/v1/findface/detectFace`
- `/api/v1/findface/detectLicensePlateMinio` - –∞–Ω–∞–ª–æ–≥ `/api/v1/findface/detectLicensePlate`
- `/api/v1/findface/createFaceMinio` - –∞–Ω–∞–ª–æ–≥ `/api/v1/findface/createFace`
- `/api/v1/findface/eventFaceMinio` - –∞–Ω–∞–ª–æ–≥ `/api/v1/findface/eventFace`
- `/api/v1/findface/addHumanCardAttachmentMinio` - –∞–Ω–∞–ª–æ–≥ `/api/v1/findface/addHumanCardAttachment`

–î–∞–Ω–Ω—ã–µ endpoints –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–º –ø–æ API, –Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ MinIO –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–ª–∞–¥–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏

```bash
curl -X POST http://localhost:20050/api/v1/findface/detectFace \
  -H "Content-Type: application/json" \
  -d '{
    "serviceName": "my-service",
    "clientId": "client-123",
    "userId": "user-456",
    "requestId": "req-789",
    "data": {
      "imageBase64": "/9j/4AAQSkZJRgABAQAAAQ...",
      "imageName": "photo.jpg"
    }
  }'
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞ —Å –∫–∞–º–µ—Ä—ã

```bash
curl -X POST http://localhost:20050/api/v1/findface/captureScreenshot \
  -H "Content-Type: application/json" \
  -d '{
    "serviceName": "my-service",
    "clientId": "client-123",
    "userId": "user-456",
    "requestId": "req-790",
    "data": {
      "cameraId": 1
    }
  }'
```

## –ö–æ–¥—ã –æ—à–∏–±–æ–∫

- **400 Bad Request** - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞
- **401 Unauthorized** - –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **403 Forbidden** - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- **500 Internal Server Error** - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ Base64
- –ü–æ–ª—è `serviceName`, `clientId`, `userId`, `requestId` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –º–æ–∂–µ—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
- API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ POST –∑–∞–ø—Ä–æ—Å—ã
- Health check –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–∞ `/health_check` –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
